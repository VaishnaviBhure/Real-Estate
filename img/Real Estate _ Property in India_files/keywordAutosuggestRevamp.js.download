var alertFlagCheck="";var onclickEvent=false;var idOfKeyword="keyword";var textSearched="";var service=null;String.prototype.replaceAll=function(c,a){var b=this;return b.replace(new RegExp(c.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"gi"),a)};function autoKeywordCompleteRevamp(e,b,h,c,g,f,j,a,d){this.oText=e;this.oDiv=b;this.maxSize=h;this.cur=-1;this.maxSelection=c;this.City=g;this.isProp=f;this.multiple=j;this.flagForReHit=true;this.locFlag=a;this.cityFromCookie=d;this.redirectFlag=false;this.paramStrip=null;this.flagForLandmarkSearch=false;alertFlagCheck=this.locFlag;e.onclick=this.onclick;e.onkeyup=this.keyUp;e.onkeydown=this.keyDown;e.autoKeywordCompleteRevamp=this}autoKeywordCompleteRevamp.prototype.hideSuggest=function(){this.autoKeywordCompleteRevamp.oDiv.style.visibility="hidden";this.autoKeywordCompleteRevamp.oDiv.style.display="none"};autoKeywordCompleteRevamp.prototype.selectText=function(b,a){if(this.oText.createTextRange){var c=this.oText.createTextRange();c.moveStart("character",b);c.moveEnd("character",a-this.oText.value.length);c.select()}else{if(this.oText.setSelectionRange){this.oText.setSelectionRange(b,a)}}this.oText.focus()};autoKeywordCompleteRevamp.prototype.textComplete=function(b){if(this.oText.createTextRange||this.oText.setSelectionRange){var a=this.oText.value.length;this.oText.value=b;this.selectText(a,b.length)}};autoKeywordCompleteRevamp.prototype.keyDown=function(a){a=window.event||a;iKeyCode=a.keyCode;switch(iKeyCode){case 38:this.autoKeywordCompleteRevamp.moveUp();break;case 40:this.autoKeywordCompleteRevamp.moveDown();break;case 13:this.autoKeywordCompleteRevamp.oDiv.style.visibility="hidden";this.autoKeywordCompleteRevamp.enterPress();return false;break}};autoKeywordCompleteRevamp.prototype.useSuggestion=function(){this.oText.focus();return false};autoKeywordCompleteRevamp.prototype.moveDown=function(){if(this.oDiv.childNodes.length>0&&this.cur<(this.oDiv.childNodes.length-1)){++this.cur;if(this.cur>=10){this.oDiv.scrollTop=this.oDiv.scrollTop+this.multiple+4}if((this.oDiv.childNodes[this.cur].innerHTML).indexOf("nonSelectEle")>=0){++this.cur;if(this.cur>=10){this.oDiv.scrollTop=this.oDiv.scrollTop+this.multiple+4}}for(var a=0;a<this.oDiv.childNodes.length;a++){if(a==this.cur){if(finalvar!=""){var d=this.oDiv.childNodes[a].getAttribute("class");if(d=="null"){d=""}this.oDiv.childNodes[a].className=d+" over";var c=this.oDiv.childNodes[a].innerHTML;c=c.replaceAll("<span>","");c=c.replaceAll("</span>","");if(c.indexOf(" (")!=-1){c=c.substring(0,c.indexOf(" ("))}if(c.indexOf(">")!="-1"&&c.lastIndexOf("<")!="-1"){this.oText.value=c.substring(c.indexOf(">")+1,c.lastIndexOf("<"))}else{this.oText.value=c+","}if(c.indexOf("nonSelectEle")!=-1){c=""}this.oText.value=this.oText.value.replace("&amp;","&");this.oText.focus();var b=this.oText.value.length;this.oText.setSelectionRange(b,b)}}else{var d=this.oDiv.childNodes[a].getAttribute("class");if(d==null){d=""}d=d.replaceAll("over","");if(d=="null"){d=""}this.oDiv.childNodes[a].className=d.trim()}}}};autoKeywordCompleteRevamp.prototype.moveUp=function(){if(this.oDiv.childNodes.length>0&&this.cur>0){--this.cur;if(this.cur<10){this.oDiv.scrollTop=this.oDiv.scrollTop-this.multiple-4}if((this.oDiv.childNodes[this.cur].innerHTML).indexOf("nonSelectEle")>=0){--this.cur;if(this.cur<10){this.oDiv.scrollTop=this.oDiv.scrollTop-this.multiple-4}}for(var a=0;a<this.oDiv.childNodes.length;a++){if(a==this.cur){if(finalvar!=""){var d=this.oDiv.childNodes[a].getAttribute("class");if(d=="null"){d=""}this.oDiv.childNodes[a].className=d+" over";var c=this.oDiv.childNodes[a].innerHTML;c=c.replaceAll("<span>","");c=c.replaceAll("</span>","");if(c.indexOf(" (")!=-1){c=c.substring(0,c.indexOf(" ("))}if(c.indexOf(">")!="-1"&&c.lastIndexOf("<")!="-1"){this.oText.value=c.substring(c.indexOf(">")+1,c.lastIndexOf("<"))}else{this.oText.value=c+","}if(this.oText.value.indexOf("nonSelectEle")!=-1){this.oText.value=""}this.oText.value=this.oText.value.replace("&amp;","&");this.oText.focus();var b=this.oText.value.length;this.oText.setSelectionRange(b,b)}}else{var d=this.oDiv.childNodes[a].getAttribute("class");if(d==null){d=""}d=d.replaceAll("over","");if(d=="null"){d=""}this.oDiv.childNodes[a].className=d.trim()}}}};autoKeywordCompleteRevamp.prototype.enterPress=function(){var a="";if(this.oDiv.childNodes.length>0&&this.cur>0){--this.cur;if(this.cur<10){this.oDiv.scrollTop=this.oDiv.scrollTop-this.multiple-4}realSelect=this.oText.value;if(this.paramStrip&&this.redirectFlag!="localityCompare"){var d=(this.cur==-1)?1:(this.cur+1);var c=this.oDiv.childNodes[d].innerHTML;var f=c.substring(c.indexOf(this.paramStrip)+this.paramStrip.length+4,c.indexOf("');\">"));addToProjectCompare(this.paramStrip,f)}else{var d=(this.cur==-1)?1:(this.cur+1);var c=this.oDiv.childNodes[d].innerHTML;a=this.oDiv.childNodes[d].getAttribute("class")}if(this.redirectFlag=="Y"){onSelectLoc(realSelect)}if(this.redirectFlag=="localityCompare"){onAutoSuggestValueChange(realSelect,this.paramStrip)}if((realSelect.lastIndexOf(", India ,")+9)==realSelect.length){getLatLngForGoogleSuggest(realSelect)}else{var j=this.oText.value.split(",");if(j.length>=2&&j[0]!=""&&j[j.length-1]==""){if(!(typeof cityLocality==="undefined")&&cityLocality){var l="localityName";var b=realSelect.split(",").length-1;if(a!=null&&a.indexOf("developerName")>-1){l="developerName"}else{if(b==1){l="bar_city_name"}else{if(b>=3){l="projectSocity"}}}var k=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;var h=msieversion();if(k||h){this.oText.value=""}setCityIfNotExistsOnFrameClick(this.oText.id,"bar_city",realSelect);if(this.cur==-1){callGaqPushCustom(realSelect.split(",")[0],1)}else{var d=this.cur+1;callGaqPushCustom(realSelect.split(",")[0],d)}createComboDivsFromKeywordSuggest(realSelect,this.oText.id,l)}}}try{if(calculateReg){calculateReg()}}catch(g){}}};autoKeywordCompleteRevamp.prototype.keyUp=function(a){a=a||window.event;var b=a.keyCode;if(b==8||b==46){this.autoKeywordCompleteRevamp.onTextChange(false)}else{if(b<32||(b>=33&&b<=46)||(b>=112&&b<=123)){}else{this.autoKeywordCompleteRevamp.onTextChange(true)}}};autoKeywordCompleteRevamp.prototype.positionSuggest=function(){var b=this.oText;var a=0,c=b.offsetHeight;while(b.offsetParent&&b.offsetParent.tagName.toUpperCase()!="BODY"){a+=b.offsetLeft;c+=b.offsetTop;b=b.offsetParent}a+=b.offsetLeft;c+=b.offsetTop};autoKeywordCompleteRevamp.prototype.onclick=function(){onclickEvent=true;this.autoKeywordCompleteRevamp.onTextChange(false)};autoKeywordCompleteRevamp.prototype.onTextChange=function(h){if(this.paramStrip&&document.getElementById(this.paramStrip)&&onclickEvent==false){document.getElementById(this.paramStrip).value=""}onclickEvent=false;this.oDiv.style.visiblity="visible";this.oDiv.style.display="block";var b=new Array();var c=this.flagForReHit;var a=this.oText.value.trim();var e=this;var g=null;if(this.City){g=this.City.value}if(!this.isProp&&containsBlockedChars(a).length>2){if(!(typeof isProperty==="undefined")&&isProperty){this.locFlag="PropKeyWithState"}var d="";if($("#bar_category").val()!=="undefined"){d=$("#bar_category").val()}if($("#bar_city").val()!=="undefined"){g=$("#bar_city").val()}var f=contextPath+"ajax/getKeywordAutoSuggestListNewProj.json?keyword="+containsBlockedChars(this.oText.value)+"&city="+g+"&maxSize="+this.maxSize+"&locFlag="+this.locFlag+"&cityFromCookie="+this.cityFromCookie+"&compareProjects="+this.paramStrip+"&category="+d;$.ajax({dataType:"json",type:"get",url:f,cache:false,async:true,success:function(p){b=p;e.flagForReHit=c;a=e.oText.value.trim();var k=0;finalvar=a;if(finalvar.indexOf(",")!=-1){k++;var o=finalvar.split(",");var n=0;for(var m=0;m<o.length;m++){n++}if(e.maxSelection&&n>e.maxSelection){alert("Not Allowed More Than "+e.maxSelection);e.oText.value=finalvar.substring(0,finalvar.lastIndexOf(","));return false}}if(a.indexOf(",")!=-1){a=a.substring(a.lastIndexOf(",")+1)}if(finalvar.indexOf(",")!=-1){finalvar=finalvar.substring(0,finalvar.lastIndexOf(","))}var l=e;e.cur=-1;if(a.length>=2){while(e.oDiv.hasChildNodes()){e.oDiv.removeChild(e.oDiv.firstChild)}var j=b;e.positionSuggest();if(j.length>=10){e.oDiv.style.height=(12*e.multiple)+"px";e.oDiv.style.overflowY="scroll"}else{e.oDiv.style.height=((j.length+4+1.5)*e.multiple)+"px";e.oDiv.style.overflowY="hidden"}for(i in j){var q=document.createElement("div");if(j[i].indexOf("(Builders)")>-1){j[i]=j[i].replace("(Builders)","");j[i]=j[i].trim();q.className="developerName"}e.oDiv.appendChild(q);q.onmouseover=q.onmouseout=q.onmousedown=function(s){s=window.event||s;oSrcDiv=s.target||s.srcElement;if(s.type=="mousedown"){var w=this.innerHTML;w=w.replaceAll("<span>","");w=w.replaceAll("</span>","");w=w.replaceAll("&amp;","&");var r="localityName";if(k==0){if(w.indexOf(" (")!=-1){l.oText.value=w.substring(0,w.indexOf(" ("))}else{var u=w.split(",").length-1;var y=this.getAttribute("class");if(y!=null&&y.indexOf("developerName")>-1){r="developerName"}else{if(u==0){r="bar_city_name"}else{if(u>=2){r="projectSocity"}}}if(!(typeof cityLocality==="undefined")&&cityLocality!=null){if(w.indexOf("nonSelectEle")==-1){callGaqLastEnteredText(l.oText.value);l.oText.value="";if(l.oText.id=="localityTextId"){l.oText.value+=w.split(",")[0]+","}else{setCityIfNotExistsOnFrameClick(l.oText.id,"bar_city",w);callGaqPushCustom(w.split(",")[0],$(this).index());createComboDivsFromKeywordSuggest(w,l.oText.id,r)}}}else{l.oText.value=w+","}if(l.oText.value.indexOf("nonSelectEle")!=-1){l.oText.value=""}}}else{if(finalvar!=""&&finalvar.length>1){if(w.indexOf(" (")!=-1){w=w.substring(0,w.indexOf(" ("))}if(w.indexOf("nonSelectEle")!=-1){w=""}var u=w.split(",").length-1;if(u==0){r="bar_city_name"}else{if(u>=2){r="projectSocity"}}callGaqLastEnteredText(l.oText.value);l.oText.value="";if(l.oText.id=="localityTextId"){l.oText.value+=w.split(",")[0]+","}else{setCityIfNotExistsOnFrameClick(l.oText.id,"bar_city",w);callGaqPushCustom(w.split(",")[0],$(this).index());createComboDivsFromKeywordSuggest(w,l.oText.id,r)}}else{l.oText.value=w+","}}if(this.oText&&this.oText.value!=""&&this.oText.value.indexOf("nonSelectEle")!=-1){this.oText.value=""}try{if(calculateReg){calculateReg()}}catch(x){}}else{if(s.type=="mouseover"){var t=this.getAttribute("class");if(t==null){t=""}this.className=t+" over"}else{if(s.type=="mouseout"){var t=this.getAttribute("class");this.className=t.replaceAll("over","").trim()}else{e.oText.focus()}}}l.oText.focus();try{var v=l.oText.value.length;l.oText.setSelectionRange(v,v)}catch(x){}};q.innerHTML=j[i]}if(j&&j.length>0){e.oDiv.style.visibility="visible"}else{e.oDiv.innerHTML="";e.oDiv.style.visibility="hidden";e.oDiv.style.display="none"}}}})}};function unique(d){var a=new Array();label:for(var c=0;c<d.length;c++){for(var b=0;b<a.length;b++){if(a[b]==d[c]){continue label}}a[a.length]=d[c]}return a}String.prototype.trim=function(){return this.replace(/^\s+|\s+$/,"")};function containsBlockedChars(f){var e=["!","@","#","$","%","^","&","*","(",")","_","+","=","{","}","|","\\","]","[",":",'"',";","'",">","<","?","/","`","~"];for(var c=0;c<e.length;c++){if(f.indexOf(e[c])!=-1){var d=f.indexOf(e[c]);var b=f.lastIndexOf(e[c]);if(d==b){f=f.replace(e[c],"")}else{for(var a=d;a<=b;a++){f=f.replace(e[c],"")}}}}return f}$(document).ready(function(){$(document).click(function(a){if($(a.target).is("#keyword_suggest")){}else{hideSuggest()}if($(a.target).is("#keyword_suggest_Loc")){}else{hideSuggest()}})});function msieversion(){var b=window.navigator.userAgent;var a=b.indexOf("MSIE ");if(a>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){return true}else{return false}}function callBackPredictions(b,a){$(".googleSuggest").remove();if(b!=null&&b.length>0){$("#keyword_suggest_Loc").append('<div class="over googleSuggest"><div class="nonSelectEleLandmark">LANDMARK (for travel time search) </div></div>');$("#keyword_suggest_Loc").show();$("#keyword_suggest").append('<div class="over googleSuggest"><div class="nonSelectEleLandmark">LANDMARK (for travel time search) </div></div>');$("#keyword_suggest").show()}else{return}for(var c=0;c<b.length;c++){var d=b[c].description;d=highlightWords(d,textSearched);$("#keyword_suggest_Loc").append('<div class="googleSuggest" onclick="getLatLngForGoogleSuggest(\''+b[c].description+"');\">"+d+" </div>");$("#keyword_suggest").append('<div class="googleSuggest" onclick="getLatLngForGoogleSuggest(\''+b[c].description+"');\">"+d+" </div>")}$("#keyword_suggest_Loc").append('<div class="google_copyright googleSuggest"><div class="nonSelectEle">Powered by Google</div></div>');$("#keyword_suggest").append('<div class="google_copyright googleSuggest"><div class="nonSelectEle">Powered by Google</div></div>')}function highlightWords(a,c){var b=new RegExp("("+c+")","gi");return a.replace(b,"<span>$1</span>")}function getLatLngForGoogleSuggest(a){$("#isRadiusSearch").val("Y");$(".formErr").hide();$("#homeTravelTimer").show();$(".orSearchBy").addClass("moreSpace");$(".travelTimerSearch").hide();$("#nearByLocDisBar").hide();placeService=new google.maps.places.PlacesService(document.createElement("div"));placeService.textSearch({query:a},function(c,b){if(b==google.maps.GeocoderStatus.OK){isRadiusSearch="Y";var f=c[0].geometry.location.lat();var d=c[0].geometry.location.lng();$("#radius").val(f+","+d+",2000");toCallSearch=false;$("#"+idOfKeyword).parent().find(".divContainer"+idOfKeyword).remove();$("#bar_city").val("");$("#bar_city_name").val("");if(a.split(",")[0]!=""){$("#travelTimeSpan2").html("From "+a.split(",")[0])}$("#distanceMin20").click();$("#TransModedriving").click();$("input[name=TransMode]").parent().removeClass("checked");$("#TransModedriving").parent().addClass("checked");createComboDivsProperty(a,idOfKeyword,"searchLocName");$("#searchLocName").val(a);$("#isGoogleSearch").val("Y");$("#selectedPlace").val($("#searchLoc").val());$("#"+idOfKeyword).val("");if(googleAutocomplete!=null){$(".pac-container").remove()}replaceValueInGaqCookie("srpLocality",$("#localityName").val(),"gaqCompleteCookie","||","N");replaceValueInGaqCookie("srpProject",$("#projectSocity").val(),"gaqCompleteCookie","||","N");replaceValueInGaqCookie("srpCity",$("#bar_city").val(),"gaqCompleteCookie","||","N");replaceValueInGaqCookie("srpCityName",$("#bar_city_name").val(),"gaqCompleteCookie","||","N");replaceValueInGaqCookie("srpLandmark",$("#searchLocName").val(),"gaqCompleteCookie","||","N");var e=replaceValueInGaqCookie("sequenceNum",null,"gaqCompleteCookie","||","Y");replaceValueInGaqCookie("universalTimestamp",""+new Date(),"gaqCompleteCookie","||","N");gaqCookie=readCookieVal("gaqCompleteCookie");console.log("gaqCookieDetail "+gaqCookie);if(_gaq){_gaq.push(["_trackEvent",gaqCookie,"AutoSuggestValue"])}}})}$(function(){$(".latestUpdatesSlider").show();$("#keyword").on("click",function(c){c.stopPropagation();var b=$(".localityKeywordParent:visible").size();var d=$(this).val().length;if(b<=0){$(".searchSuggestionsContainer").slideDown()}});$("#keyword").on("keyup",function(){var b=$(".localityKeywordParent:visible").size();var c=$(this).val().length;console.log(c);if(c>=3){$(".searchSuggestionsContainer").slideUp();$(".searchSuggestionsContainer").remove()}});$("#refine_keyword").on("click",function(c){c.stopPropagation();var b=$(".localityKeywordParent:visible").size();var d=$(this).val().length;if(b<=0){$(".searchSuggestionsContainer").slideDown()}});$("#refine_keyword").on("keyup",function(){var b=$(".localityKeywordParent:visible").size();var c=$(this).val().length;console.log(c);if(c>=3){$(".searchSuggestionsContainer").slideUp();$(".searchSuggestionsContainer").remove()}});$("body").on("click",".travelTimePopUpLink",function(b){b.stopPropagation();$(".travelTimePopUp").slideToggle()});$("body").on("click",function(){$(".travelTimePopUp").slideUp()});$("body").on("click",".travelTimePopUp",function(b){b.stopPropagation()});$("body").on("mouseover",".googleSuggest",function(){$(this).addClass("over")});$("body").on("mouseout",".googleSuggest",function(){$(this).removeClass("over")});$("body").on("click",function(){$(".searchSuggestionsContainer").hide()});if($(".searchHomeOnly").length>0){var a=$(".globalMenu");$(window).scroll(function(){if($(this).scrollTop()>510){a.addClass("f-nav")}else{a.removeClass("f-nav")}})}});function hideSuggest(){$("#keyword_suggest_Loc").css({visibility:"hidden",display:"none"});$("#keyword_suggest").css({visibility:"hidden",display:"none"})};